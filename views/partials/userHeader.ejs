<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lovell Soccer</title>
  <link rel="stylesheet" href="/css/userLogin_Signup.css">
  <link rel="stylesheet" href="/css/magnify.css">
  <link rel="stylesheet" href="/css/userProfile.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>


<div class="flex flex-wrap place-items-start overflow-x-hidden">
  <section class="relative mx-auto">
      <!-- navbar -->
    <nav class="flex justify-between bg-white text-black w-screen">
      <div class="px-5 xl:px-12 py-6 flex w-full items-center">
        <a href="/">
        <span class="md:text-3xl font-medium font-heading text-lg" >
          lovell soccer
        </span>
      </a>
        <!-- Nav Links -->
        <ul class="hidden lg:flex px-4 mx-auto font-normal font-heading space-x-12">
          <li><a class="hover:text-black
            -200" href="/user/allProducts">ALL PRODUCTS</a></li>
            <% categories.forEach(category => { %>
              <li><a class="hover:text-black" href="/<%= category.name %>/<%= category._id %>"><%= category.name %></a></li>
            <% }); %>
        </ul>
        <!-- Header Icons -->
        <% if (userData) { %>
        <div class="hidden xl:flex  space-x-5 ">
          <form id="searchForm" class="relative text-gray-600">
            <input type="search" id="search" name="search" placeholder="Search" class="bg-white h-10 px-5 pr-10 rounded-full text-sm focus:outline-none">
            <button type="submit" class="absolute right-0 top-0 mt-3 mr-4">
              <svg class="h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" width="512px" height="512px">
                <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"/>
              </svg>
            </button>
          </form>
          <a class="flex items-center hover:text-black
          -200" href="/user/wishlist">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
            <span class="flex absolute -mt-5 ml-4">
              <span class="animate-ping absolute inline-flex h-3 w-3 rounded-full opacity-75"></span>
                <span class="relative inline-flex rounded-full h-3 w-3 id="wishlistCount">
                </span>
                <%= wishlistCount %>
              </span>
          </a>
          <a class="flex items-center hover:text-black-200" href="/user/cart">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
            <span class="flex absolute -mt-5 ml-4">
              <span class="animate-ping absolute inline-flex h-3 w-3 rounded-full opacity-75"></span>
                <span class="relative inline-flex rounded-full h-3 w-3 id="cartCount">
                </span>
                <%= cartCount %>
              </span>
          </a> 
          <!-- User Profile -->
          <a class="flex items-center hover:text-black-200" href="/userProfile">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hover:text-black-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
          </a>
          <div class="hidden xl:block">
            <a href="/userLogout">
              <button  class="py-2.5 px-5 me-2  m-2 text-sm font-medium text-gray-900  bg-white rounded-full   focus:z-10   dark:hover:text-white dark:hover:bg-gray-700">
                LOG OUT
              </button>
            </a>
          </div>
        </div>
        <% } else{ %>
          <div class="hidden xl:block">
            <a href="/userLogin">
              <button  class="py-2.5 px-5 me-2  m-2 text-sm font-medium text-gray-900  bg-white rounded-full   focus:z-10   dark:hover:text-white dark:hover:bg-gray-700">
                LOG IN
              </button>
            </a>
          </div>
          <% } %>
      </div>
      <!-- Responsive navbar -->
      <% if(userData){ %>
       
      <a class="xl:hidden flex items-center max-md:hidden pr-8 hover:text-black
          -200" href="/user/wishlist">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
            <span class="flex absolute -mt-5 ml-4">
              <span class="animate-ping absolute inline-flex h-3 w-3 rounded-full opacity-75"></span>
                <span class="relative inline-flex rounded-full h-3 w-3 id="wishlistCount">
                </span>
                <%= wishlistCount %>
              </span>
          </a>

          <a class="xl:hidden max-md:hidden pr-8 flex items-center hover:text-black-200" href="/user/cart">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
          <span class="flex absolute -mt-5 ml-4">
            <span class="animate-ping absolute inline-flex h-3 w-3 rounded-full opacity-75"></span>
              <span class="relative inline-flex rounded-full h-3 w-3 id="cartCount">
              </span>
              <%= cartCount %>
            </span>
        </a> 
      <% } %>
      <button class="navbar-burger relative self-center mr-12 xl:hidden"  onclick="toggleDropdown()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hover:text-gray-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
       <!-- Dropdown Menu (Initially hidden) -->    
    </nav>
    <div id="dropdownMenu" class="hidden right-0 m top-full w-full bg-white border rounded-md shadow-lg z-10">
      <ul class="p-4">
        <li ><a class="lg:hidden hover:text-black-200  text-base" href="/user/allProducts">ALL PRODUCTS</a></li>
        <% categories.forEach(category => { %>
          <li ><a class="lg:hidden hover:text-black" href="/<%= category.name %>/<%= category._id %>"><%= category.name %></a></li>
        <% }); %>
        <!-- Login Button -->
        <% if (userData) { %>
          <li ><a class="items-center md:hidden hover:text-black-200" href="/user/wishlist">WISHLIST </a></li>
          <li ><a class="md:hidden items-center hover:text-black-200" href="/user/cart">CART</a> </li>
          <li ><a class="xl:hidden items-center hover:text-black-200" href="/userProfile">USER PROFILE</a></li>
          <li >
            <a href="/userLogout" class="hover:text-black">LOG OUT</a>
          </li>
        <% } else { %>
          <li ></li>>
            <a href="/userLogin" class="hover:text-black">LOG IN</a>
          </li>
        <% } %>
      </ul>
    </div>
    
  </section>
</div>

</html>

<script>
 function toggleDropdown() {
    var dropdownMenu = document.getElementById("dropdownMenu");
    console.log("dropdown toggle - ",dropdownMenu);
    dropdownMenu.classList.toggle("hidden");
  }


  const productSearchForm = document.getElementById('searchForm')
  productSearchForm.addEventListener('submit',(e)=>{
    e.preventDefault()
    const formData = new FormData(productSearchForm)
     // Convert FormData to an object
  const formDataObject = {};
  formData.forEach((value, key) => {
    formDataObject[key] = value;
  });

  const data = JSON.stringify(formDataObject)
    console.log(data);
    window.location.href = '/user/searchProducts?search=' + encodeURIComponent(formDataObject.search);
  })

</script>
  

